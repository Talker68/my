<div class="row b-list_row" ng-show="!orderCtrl.isHidden">
  <!-- start Основные данные-->

  <!-- start В СТАНДАРТНОМ СПИСКЕ -->
  <div class="mini">
    <!-- start Основная инфа -->
    <div ng-class="orderCtrl.auctionPending ? 'col-xs-12' : 'col-xs-10'">
      <div class="row b-list_section">
        <div ng-class="orderCtrl.auctionPending ? 'col-xs-3' : 'col-xs-2' ">
          <!-- start Номер заявки -->
          <div>
            <b class="green"><a ng-click="orderCtrl.showDetailRoute()" class="btn btn-ok btn__s">{{::orderCtrl.orderData.id | orderId: 'УП-'}}</a></b>
          </div>
          <!-- end Номер заявки -->
          <div>
            Тип кузова <b>{{::orderCtrl.orderData.loadingType.name}}</b>
          </div>
        </div>
        <div ng-class="orderCtrl.auctionPending ? 'col-xs-3' : 'col-xs-2' ">
          <div>
            Обязательные условия
            <div>
              <b>{{::orderCtrl.orderData.requiredCondition}}</b>
            </div>
          </div>
        </div>
        <div ng-class="orderCtrl.auctionPending ? 'col-xs-3' : 'col-xs-2' ">
          <div>
            <b>Тип груза</b>
            <div>
              <span ng-repeat="cargoType in orderCtrl.orderData.cargo.type track by $index">{{::cargoType}}{{$last ? '' : ', '}}</span>
            </div>
          </div>
        </div>
        <div ng-class="orderCtrl.auctionPending ? 'col-xs-3' : 'col-xs-2' ">
          <div>
            Вес груза, кг
            <div>
              <b>{{::orderCtrl.orderData.cargo.weight | num: true: 'ceil' }}</b>
            </div>
          </div>
        </div>
        <p class="clearfix" ng-if="orderCtrl.auctionPending"></p>
        <div ng-class="orderCtrl.auctionPending ? 'col-xs-12' : 'col-xs-4' ">
          <div class="row">
            <div class="col-xs-6">
              <div>
                <b>Начальная точка</b>
              </div>
              <div>
                <span>{{::orderCtrl.orderData.route.routePoints[0].address}}</span>
              </div>
              <div>
                <b class="green">{{::orderCtrl.orderData.route.routePoints[0].date | date : "dd.MM.yyyy HH:mm" : "UTC"
                  }}</b>
              </div>
            </div>
            <div class="col-xs-6">
              <div><b>Конечная точка</b></div>
              <div>
                <span>{{::orderCtrl.orderData.route.routePoints[orderCtrl.orderData.route.routePoints.length -
                  1].address}}</span>
              </div>
              <div>
                <b class="green">{{::orderCtrl.orderData.route.routePoints[orderCtrl.orderData.route.routePoints.length
                  - 1].date | date : "dd.MM.yyyy HH:mm" : "UTC" }}</b>
              </div>
            </div>
            <div class="clearfix">
            </div>
            <div class="col-xs-12">
              <div ng-class="{orange: orderCtrl.orderData.route.routePoints.length > 2}"><b>Точки выгрузки {{::orderCtrl.orderData.route.routePoints.length - 1}}</b></div>
            </div>
          </div>
        </div>
        <p class="clearfix" ng-if="orderCtrl.auctionPending"></p>
        <div ng-class="orderCtrl.auctionPending ? 'col-xs-3' : 'col-xs-2' ">
          <div>
            Логист
            <div>
              <b>{{::orderCtrl.orderData.logist.name}}</b>
            </div>
          </div>
        </div>
        <div ng-class="orderCtrl.auctionPending ? 'col-xs-3' : 'col-xs-2' ">
          <div>
            Телефон
            <div>
              <b>{{::orderCtrl.orderData.logist.phone}}</b>
            </div>
          </div>
        </div>
        <div ng-class="orderCtrl.auctionPending ? 'col-xs-3' : 'col-xs-2' ">
          <div>
            <b>Ставка без НДС</b>
            <div>
              <b class="green">{{::orderCtrl.orderData.transportationCost | num: true}}</b>
            </div>
          </div>
        </div>
        <div ng-class="orderCtrl.auctionPending ? 'col-xs-3' : 'col-xs-2' ">
          <div>
            Транзит
            <div>
              <b>{{::orderCtrl.orderData.route.duration}}</b>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- end Основная заявки -->

    <!-- start статус и кнопки -->
    <div class="col-xs-2 vertical-btns-cnt" ng-hide="orderCtrl.auctionPending">

      <!--Статус заявки-->
      <div>{{orderCtrl.orderStatusString}}</div>

      <!--Тут генерятся кнопки !НЕ ТРОГАТЬ!-->
      <div data-element="order-controls"></div>

    </div>
    <!-- end статус и кнопки -->

    <!--Спрятать заявку-->
    <a ng-click="orderCtrl.hide()" class="btn btn-neutral btn-hide" ng-if="!orderCtrl.auctionPending">Спрятать</a>
    <!-- end Кнопки -->
  </div>
  <!-- start В СТАНДАРТНОМ СПИСКЕ -->

  <div class="clearfix"></div>

  <!-- start Редукцион-->
  <div ng-if="orderCtrl.orderData.auction && orderCtrl.orderData.auction.status !== orderCtrl.AUCTION_STATUSES.PENDING">
    <hr>
    <div class="col-xs-10">
      <div class="row b-list_section">
        <div class="col-xs-2">
          Стартовый тариф без НДС
          <div>
            <b class="green">{{::orderCtrl.orderData.auction.startingBid}}</b>
          </div>
        </div>
        <!--Забрать сразу-->
        <div class="col-xs-2">
          Забрать сразу
          <div>
            <b class="green">{{::orderCtrl.orderData.auction.takeNowAmount}}</b>
          </div>
        </div>
        <!--начало-->
        <div class="col-xs-2">
          Начало
          <div>
            <b class="green">{{::orderCtrl.orderData.auction.start | date : "dd.MM.yyyy HH:mm"}}</b>
          </div>
        </div>
        <!--Конец-->
        <div class="col-xs-2">
          Конец
          <div>
            <b
              ng-class="{green : !orderCtrl.orderData.auction.prolonged, orange : orderCtrl.orderData.auction.prolonged}">{{::orderCtrl.orderData.auction.finish
              | date : "dd.MM.yyyy HH:mm"}}</b>
          </div>
        </div>
        <!--Шаг-->
        <div class="col-xs-2">
          Шаг
          <div>
            <b class="green">{{::orderCtrl.orderData.auction.step}}</b>
          </div>
        </div>
      </div>

      <div class="row b-list_section" ng-if="orderCtrl.orderData.auction.status === orderCtrl.AUCTION_STATUSES.ACTIVE">

        <div ng-if="orderCtrl.userType === orderCtrl.USER_TYPES.FORWARDER">
          <div class="col-xs-4">
            <div ng-show="orderCtrl.auctionForm.showBidStatus">
              <p class="text-success" ng-show="orderCtrl.bidSucess">Ставка сделана!</p>
              <p class="text-danger" ng-show="!orderCtrl.bidSucess">Ставка не сделана!</p>
            </div>

            <form class="form-inline" id="auctionForm"
                  novalidate autocomplete="off"
                  name="orderCtrl.auctionForm"
                  ng-submit="orderCtrl.newBet()">

              <div class="input-group">
                <input type="number" class="form-control"
                       ng-model="orderCtrl.bid" name="bid"
                       bet-validation
                       auction="orderCtrl.orderData.auction"
                       step="{{orderCtrl.orderData.auction.step}}"
                       ng-change = "orderCtrl.auctionForm.showBidStatus = false"
                />
              </div>
              <button type="submit" class="btn btn-ok" ng-disabled="!orderCtrl.auctionForm.$valid || orderCtrl.buttonsDisabled">Сделать ставку</button>
            </form>
          </div>

          <div class="col-xs-2" ng-if="orderCtrl.orderData.auction.lastBid">
            Последняя ставка <b class="green"> <br>{{orderCtrl.orderData.auction.lastBid.bid}}</b> <br>в {{orderCtrl.orderData.auction.lastBid.date | date : "dd.MM.yyyy HH:mm"}}
          </div>

          <div class="col-xs-2" ng-if="orderCtrl.orderData.auction.lastMyBid">
            <b>Ваша ставка</b> <b class="green"> <br>{{orderCtrl.orderData.auction.lastMyBid.bid}}</b> <br>в {{orderCtrl.orderData.auction.lastMyBid.date | date : "dd.MM.yyyy HH:mm"}}
          </div>

          <div class="col-xs-12 text-danger" role="alert"
               ng-messages="orderCtrl.auctionForm.$error"
               ng-messages-multiple
               ng-if="orderCtrl.auctionForm.$dirty">
            <div ng-message="BVrequired">Не указана ставка</div>
            <div ng-message="BVlessStartingBid">Ставка не должна быть больше стартовой</div>
            <div ng-message="BVlessLastBid">Ставка должна быть меньше текущей</div>
            <div ng-message="BVlmultiplicityToStep">Ставка должна быть кратна шагу</div>
          </div>

        </div>
        <!-- start История ставок -->
        <div class="row b-list_section">
          <div class="col-xs-12">
            <div class="s-title">
              <b><a ng-click="showHistory = !showHistory">История ставок</a></b>
            </div>

            <table class="table table-bordered table-striped" ng-if="showHistory">

              <tr  ng-class="{success : (orderCtrl.userType !== orderCtrl.USER_TYPES.OPERATOR) && bid.myBet}" ng-repeat="bid in orderCtrl.orderData.auction.auctionBids">
                <td>{{bid.date | date: "dd.MM.yyyy HH:mm"}}</td>
                <td>{{bid.forwarder ? 'Ваша ставка' : 'Другой участник торгов'}}</td>
                <td>{{bid.bid}}</td>
              </tr>
            </table>
          </div>
        </div>
        <!-- end История ставок -->
      </div>
    </div>
  </div>
  <!-- end Редукцион -->

  <!-- start Ярлыки -->
  <div class="b-list_label">
    <div ng-if="orderCtrl.deadline" class="b-list_label-item ng-scope">на завтра</div>
    <div ng-if="orderCtrl.orderData.canceled" class="b-list_label-item ng-scope">отменен</div>
  </div>
  <!-- end Ярлыки -->

  <div class="clearfix">
  </div>


  <!--<pre>{{orderCtrl.orderData | json}}</pre>-->
</div>